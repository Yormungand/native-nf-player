!function(t){"use strict";t=t||window;var n=[],o=!1,a=!1;function d(){if(!o){o=!0;for(var t=0;t<n.length;t++)n[t].fn.call(window,n[t].ctx);n=[]}}function c(){"complete"===document.readyState&&d()}t.docReady=function(t,e){if("function"!=typeof t)throw new TypeError("callback for docReady(fn) must be a function");o?setTimeout(function(){t(e)},1):(n.push({fn:t,ctx:e}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(d,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):(document.attachEvent("onreadystatechange",c),window.attachEvent("onload",d)),a=!0))}}(window);
const playpause=document.getElementById("playpause"),playButton=document.getElementById("playButton"),video=document.getElementById("video"),volume=document.getElementById("volume"),fullscreen=document.getElementById("fullscreen"),player_wrap=document.getElementById("video-wrap"),forward=document.getElementById("forward"),rewind=document.getElementById("rewind"),progress=document.getElementById("progressBar"),progressPct=document.getElementById("progressPct"),progressThumb=document.getElementById("progressThumb"),progressPrev=document.getElementById("progressPrev"),episodes=document.getElementById("episodes"),videoWrap=document.getElementById("video-wrap"),episodesList=document.getElementById("episodes_list");let volumeIndicator=document.getElementById("volumeIndicator"),rewinded=document.getElementById("rewind_ed"),forwarded=document.getElementById("forward_ed");class customNetflix{constructor(e,t,o){this.element=e,this.sources=t,this.episodeCount=o}init(){getDeviceType()}play(){}stop(){}pause(){}rewind(){}forward(){}fs_enter(){}fs_exit(){}episodes(){}}const getDeviceType=()=>{var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?(alert("tablet"),screen.orientation.lock("landscape"),"tablet"):/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};let forwardRewind=function(e){null!=e&&("forward"===e?(video.currentTime+=10,forwarded.style.opacity="1",setTimeout(()=>{forwarded.style.opacity="0"},300)):"rewind"===e&&(video.currentTime-=10,rewinded.style.opacity="1",setTimeout(()=>{rewinded.style.opacity="0"},300)))},checkVolume=function(e){var t;e&&(t=Math.floor(10*video.volume)/10,"+"===e&&(t<1?video.volume+=.1:"-"===e&&0<t&&(video.volume-=.1)),video.muted=t<=0)},fs_check=function(e){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,o=t?"fs-enter":"fs-exit";return player_wrap.fullscreenEnabled||player_wrap.requestFullscreen(),document.exitFullscreen&&document.exitFullscreen(),changeButtonState("fs-enter"==o?"fs-enter":"fs-exit"),console.log(t),t};function progressInteraction(e){video.paused||video.ended||(e=(e.pageX-progress.offsetLeft)*video.duration/video.offsetWidth,video.currentTime=e)}function changeButtonState(e){"playpause"===e&&(video.paused||video.ended?(playpause.setAttribute("data-state","play"),playButton.setAttribute("data-state","pause")):(playpause.setAttribute("data-state","pause"),playButton.setAttribute("data-state","play")),playButton.style.opacity="1",setTimeout(()=>{playButton.style.opacity="0"},300)),"volume"===e?(1===video.volume||.65<video.volume?(volumeIndicator.setAttribute("data-state","volume_loud"),volume.setAttribute("data-state","volume_loud")):video.volume<.65&&.4<video.volume?(volumeIndicator.setAttribute("data-state","volume_medium"),volume.setAttribute("data-state","volume_medium")):video.volume<.4&&.1<video.volume?(volumeIndicator.setAttribute("data-state","volume_low"),volume.setAttribute("data-state","volume_low")):0===video.volume&&(volumeIndicator.setAttribute("data-state","volume_muted"),volume.setAttribute("data-state","volume_muted")),console.log("button state change to",e)):"mute"===e?volume.setAttribute("data-state",video.muted?"unmute":"mute"):"fs-enter"===e?fullscreen.setAttribute("data-state","fs-enter"):"fs-exit"===e&&fullscreen.setAttribute("data-state","fs-exit")}function volumeControl(e){"up"===e?video.volume=Math.min(1,video.volume+.1):"down"===e&&(video.volume=Math.max(0,video.volume-.1))}const showEpisodes=()=>{};function closeAll(){1===episodeClickCount&&episodes.click()}video.addEventListener("timeupdate",e=>{var t=video.currentTime/video.duration;progressPct.style.width=100*t+"%",progressThumb.style.left=100*t+"%"}),video.addEventListener("play",e=>{changeButtonState("playpause"),closeAll()}),video.addEventListener("pause",e=>{changeButtonState("playpause")}),video.addEventListener("click",e=>{video.paused||video.ended?video.play():video.play&&video.pause()}),video.addEventListener("dblclick",e=>{fs_check()}),video.addEventListener("volumechange",e=>{changeButtonState("volume")}),progressThumb.addEventListener("drag",e=>{}),fullscreen.addEventListener("click",e=>{fs_check()}),forward.addEventListener("click",e=>{forwardRewind("forward")}),rewind.addEventListener("click",e=>{forwardRewind("rewind")}),playpause.addEventListener("click",e=>{video.paused||video.ended?video.play():video.play&&video.pause()}),progress.addEventListener("drag",e=>{e=e.offsetX/progress.offsetWidth;video.currentTime=e*video.duration}),progress.addEventListener("click",e=>{e=e.offsetX/progress.offsetWidth;video.currentTime=e*video.duration}),progress.addEventListener("mousemove",e=>{var t=new Date(null),o=e.offsetX/progress.offsetWidth,o=(t.setSeconds(o*video.duration),t.toISOString().substr(11,8));progressPrev.innerText=o,progressPrev.style.display="block",progressPrev.style.left=e.clientX+"px"}),progress.addEventListener("mouseleave",e=>{progressPrev.style.display="none"});let episodeClickCount=0;episodes.addEventListener("click",e=>{0===episodeClickCount?(video.paused||video.pause(),document.getElementById("episodes_list").style.right=0,episodeClickCount++):(video.paused&&video.play(),document.getElementById("episodes_list").style.right="-100%",episodeClickCount--)}),window.onkeydown=function(e){"37"==(e=e||window.event).keyCode?forwardRewind("rewind"):"39"==e.keyCode?forwardRewind("forward"):"32"==e.keyCode?video.paused||video.ended?video.play():video.play&&video.pause():"70"==e.keyCode?fs_check():"38"==e.keyCode?(volumeControl("up"),volumeIndicator.style.opacity="1",setTimeout(()=>{volumeIndicator.style.opacity="0"},250)):"40"==e.keyCode&&(volumeControl("down"),volumeIndicator.style.opacity="1",setTimeout(()=>{volumeIndicator.style.opacity="0"},250))};
